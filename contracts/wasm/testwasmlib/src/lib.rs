// Copyright 2020 IOTA Stiftung
// SPDX-License-Identifier: Apache-2.0

// (Re-)generated by schema tool
// >>>> DO NOT CHANGE THIS FILE! <<<<
// Change the json schema instead

#![allow(dead_code)]
#![allow(unused_imports)]

use testwasmlib::*;
use wasmlib::*;
use wasmlib::host::*;

use crate::consts::*;
use crate::events::*;
use crate::keys::*;
use crate::params::*;
use crate::results::*;
use crate::state::*;

mod consts;
mod contract;
mod events;
mod keys;
mod params;
mod results;
mod state;
mod typedefs;
mod testwasmlib;

#[no_mangle]
fn on_load() {
    let exports = ScExports::new();
    exports.add_func(FUNC_ARRAY_CLEAR,   func_array_clear_thunk);
    exports.add_func(FUNC_ARRAY_CREATE,  func_array_create_thunk);
    exports.add_func(FUNC_ARRAY_SET,     func_array_set_thunk);
    exports.add_func(FUNC_MAP_CLEAR,     func_map_clear_thunk);
    exports.add_func(FUNC_MAP_CREATE,    func_map_create_thunk);
    exports.add_func(FUNC_MAP_SET,       func_map_set_thunk);
    exports.add_func(FUNC_PARAM_TYPES,   func_param_types_thunk);
    exports.add_func(FUNC_RANDOM,        func_random_thunk);
    exports.add_func(FUNC_TRIGGER_EVENT, func_trigger_event_thunk);
    exports.add_view(VIEW_ARRAY_LENGTH,  view_array_length_thunk);
    exports.add_view(VIEW_ARRAY_VALUE,   view_array_value_thunk);
    exports.add_view(VIEW_BLOCK_RECORD,  view_block_record_thunk);
    exports.add_view(VIEW_BLOCK_RECORDS, view_block_records_thunk);
    exports.add_view(VIEW_GET_RANDOM,    view_get_random_thunk);
    exports.add_view(VIEW_IOTA_BALANCE,  view_iota_balance_thunk);
    exports.add_view(VIEW_MAP_VALUE,     view_map_value_thunk);

    unsafe {
        for i in 0..KEY_MAP_LEN {
            IDX_MAP[i] = get_key_id_from_string(KEY_MAP[i]);
        }
    }
}

pub struct ArrayClearContext {
	events:  TestWasmLibEvents,
	params: ImmutableArrayClearParams,
	state: MutableTestWasmLibState,
}

fn func_array_clear_thunk(ctx: &ScFuncContext) {
	ctx.log("testwasmlib.funcArrayClear");
	let f = ArrayClearContext {
		events:  TestWasmLibEvents {},
		params: ImmutableArrayClearParams {
			id: OBJ_ID_PARAMS,
		},
		state: MutableTestWasmLibState {
			id: OBJ_ID_STATE,
		},
	};
	ctx.require(f.params.name().exists(), "missing mandatory name");
	func_array_clear(ctx, &f);
	ctx.log("testwasmlib.funcArrayClear ok");
}

pub struct ArrayCreateContext {
	events:  TestWasmLibEvents,
	params: ImmutableArrayCreateParams,
	state: MutableTestWasmLibState,
}

fn func_array_create_thunk(ctx: &ScFuncContext) {
	ctx.log("testwasmlib.funcArrayCreate");
	let f = ArrayCreateContext {
		events:  TestWasmLibEvents {},
		params: ImmutableArrayCreateParams {
			id: OBJ_ID_PARAMS,
		},
		state: MutableTestWasmLibState {
			id: OBJ_ID_STATE,
		},
	};
	ctx.require(f.params.name().exists(), "missing mandatory name");
	func_array_create(ctx, &f);
	ctx.log("testwasmlib.funcArrayCreate ok");
}

pub struct ArraySetContext {
	events:  TestWasmLibEvents,
	params: ImmutableArraySetParams,
	state: MutableTestWasmLibState,
}

fn func_array_set_thunk(ctx: &ScFuncContext) {
	ctx.log("testwasmlib.funcArraySet");
	let f = ArraySetContext {
		events:  TestWasmLibEvents {},
		params: ImmutableArraySetParams {
			id: OBJ_ID_PARAMS,
		},
		state: MutableTestWasmLibState {
			id: OBJ_ID_STATE,
		},
	};
	ctx.require(f.params.index().exists(), "missing mandatory index");
	ctx.require(f.params.name().exists(), "missing mandatory name");
	ctx.require(f.params.value().exists(), "missing mandatory value");
	func_array_set(ctx, &f);
	ctx.log("testwasmlib.funcArraySet ok");
}

pub struct MapClearContext {
	events:  TestWasmLibEvents,
	params: ImmutableMapClearParams,
	state: MutableTestWasmLibState,
}

fn func_map_clear_thunk(ctx: &ScFuncContext) {
	ctx.log("testwasmlib.funcMapClear");
	let f = MapClearContext {
		events:  TestWasmLibEvents {},
		params: ImmutableMapClearParams {
			id: OBJ_ID_PARAMS,
		},
		state: MutableTestWasmLibState {
			id: OBJ_ID_STATE,
		},
	};
	ctx.require(f.params.name().exists(), "missing mandatory name");
	func_map_clear(ctx, &f);
	ctx.log("testwasmlib.funcMapClear ok");
}

pub struct MapCreateContext {
	events:  TestWasmLibEvents,
	params: ImmutableMapCreateParams,
	state: MutableTestWasmLibState,
}

fn func_map_create_thunk(ctx: &ScFuncContext) {
	ctx.log("testwasmlib.funcMapCreate");
	let f = MapCreateContext {
		events:  TestWasmLibEvents {},
		params: ImmutableMapCreateParams {
			id: OBJ_ID_PARAMS,
		},
		state: MutableTestWasmLibState {
			id: OBJ_ID_STATE,
		},
	};
	ctx.require(f.params.name().exists(), "missing mandatory name");
	func_map_create(ctx, &f);
	ctx.log("testwasmlib.funcMapCreate ok");
}

pub struct MapSetContext {
	events:  TestWasmLibEvents,
	params: ImmutableMapSetParams,
	state: MutableTestWasmLibState,
}

fn func_map_set_thunk(ctx: &ScFuncContext) {
	ctx.log("testwasmlib.funcMapSet");
	let f = MapSetContext {
		events:  TestWasmLibEvents {},
		params: ImmutableMapSetParams {
			id: OBJ_ID_PARAMS,
		},
		state: MutableTestWasmLibState {
			id: OBJ_ID_STATE,
		},
	};
	ctx.require(f.params.key().exists(), "missing mandatory key");
	ctx.require(f.params.name().exists(), "missing mandatory name");
	ctx.require(f.params.value().exists(), "missing mandatory value");
	func_map_set(ctx, &f);
	ctx.log("testwasmlib.funcMapSet ok");
}

pub struct ParamTypesContext {
	events:  TestWasmLibEvents,
	params: ImmutableParamTypesParams,
	state: MutableTestWasmLibState,
}

fn func_param_types_thunk(ctx: &ScFuncContext) {
	ctx.log("testwasmlib.funcParamTypes");
	let f = ParamTypesContext {
		events:  TestWasmLibEvents {},
		params: ImmutableParamTypesParams {
			id: OBJ_ID_PARAMS,
		},
		state: MutableTestWasmLibState {
			id: OBJ_ID_STATE,
		},
	};
	func_param_types(ctx, &f);
	ctx.log("testwasmlib.funcParamTypes ok");
}

pub struct RandomContext {
	events:  TestWasmLibEvents,
	state: MutableTestWasmLibState,
}

fn func_random_thunk(ctx: &ScFuncContext) {
	ctx.log("testwasmlib.funcRandom");
	let f = RandomContext {
		events:  TestWasmLibEvents {},
		state: MutableTestWasmLibState {
			id: OBJ_ID_STATE,
		},
	};
	func_random(ctx, &f);
	ctx.log("testwasmlib.funcRandom ok");
}

pub struct TriggerEventContext {
	events:  TestWasmLibEvents,
	params: ImmutableTriggerEventParams,
	state: MutableTestWasmLibState,
}

fn func_trigger_event_thunk(ctx: &ScFuncContext) {
	ctx.log("testwasmlib.funcTriggerEvent");
	let f = TriggerEventContext {
		events:  TestWasmLibEvents {},
		params: ImmutableTriggerEventParams {
			id: OBJ_ID_PARAMS,
		},
		state: MutableTestWasmLibState {
			id: OBJ_ID_STATE,
		},
	};
	ctx.require(f.params.address().exists(), "missing mandatory address");
	ctx.require(f.params.name().exists(), "missing mandatory name");
	func_trigger_event(ctx, &f);
	ctx.log("testwasmlib.funcTriggerEvent ok");
}

pub struct ArrayLengthContext {
	params: ImmutableArrayLengthParams,
	results: MutableArrayLengthResults,
	state: ImmutableTestWasmLibState,
}

fn view_array_length_thunk(ctx: &ScViewContext) {
	ctx.log("testwasmlib.viewArrayLength");
	let f = ArrayLengthContext {
		params: ImmutableArrayLengthParams {
			id: OBJ_ID_PARAMS,
		},
		results: MutableArrayLengthResults {
			id: OBJ_ID_RESULTS,
		},
		state: ImmutableTestWasmLibState {
			id: OBJ_ID_STATE,
		},
	};
	ctx.require(f.params.name().exists(), "missing mandatory name");
	view_array_length(ctx, &f);
	ctx.log("testwasmlib.viewArrayLength ok");
}

pub struct ArrayValueContext {
	params: ImmutableArrayValueParams,
	results: MutableArrayValueResults,
	state: ImmutableTestWasmLibState,
}

fn view_array_value_thunk(ctx: &ScViewContext) {
	ctx.log("testwasmlib.viewArrayValue");
	let f = ArrayValueContext {
		params: ImmutableArrayValueParams {
			id: OBJ_ID_PARAMS,
		},
		results: MutableArrayValueResults {
			id: OBJ_ID_RESULTS,
		},
		state: ImmutableTestWasmLibState {
			id: OBJ_ID_STATE,
		},
	};
	ctx.require(f.params.index().exists(), "missing mandatory index");
	ctx.require(f.params.name().exists(), "missing mandatory name");
	view_array_value(ctx, &f);
	ctx.log("testwasmlib.viewArrayValue ok");
}

pub struct BlockRecordContext {
	params: ImmutableBlockRecordParams,
	results: MutableBlockRecordResults,
	state: ImmutableTestWasmLibState,
}

fn view_block_record_thunk(ctx: &ScViewContext) {
	ctx.log("testwasmlib.viewBlockRecord");
	let f = BlockRecordContext {
		params: ImmutableBlockRecordParams {
			id: OBJ_ID_PARAMS,
		},
		results: MutableBlockRecordResults {
			id: OBJ_ID_RESULTS,
		},
		state: ImmutableTestWasmLibState {
			id: OBJ_ID_STATE,
		},
	};
	ctx.require(f.params.block_index().exists(), "missing mandatory blockIndex");
	ctx.require(f.params.record_index().exists(), "missing mandatory recordIndex");
	view_block_record(ctx, &f);
	ctx.log("testwasmlib.viewBlockRecord ok");
}

pub struct BlockRecordsContext {
	params: ImmutableBlockRecordsParams,
	results: MutableBlockRecordsResults,
	state: ImmutableTestWasmLibState,
}

fn view_block_records_thunk(ctx: &ScViewContext) {
	ctx.log("testwasmlib.viewBlockRecords");
	let f = BlockRecordsContext {
		params: ImmutableBlockRecordsParams {
			id: OBJ_ID_PARAMS,
		},
		results: MutableBlockRecordsResults {
			id: OBJ_ID_RESULTS,
		},
		state: ImmutableTestWasmLibState {
			id: OBJ_ID_STATE,
		},
	};
	ctx.require(f.params.block_index().exists(), "missing mandatory blockIndex");
	view_block_records(ctx, &f);
	ctx.log("testwasmlib.viewBlockRecords ok");
}

pub struct GetRandomContext {
	results: MutableGetRandomResults,
	state: ImmutableTestWasmLibState,
}

fn view_get_random_thunk(ctx: &ScViewContext) {
	ctx.log("testwasmlib.viewGetRandom");
	let f = GetRandomContext {
		results: MutableGetRandomResults {
			id: OBJ_ID_RESULTS,
		},
		state: ImmutableTestWasmLibState {
			id: OBJ_ID_STATE,
		},
	};
	view_get_random(ctx, &f);
	ctx.log("testwasmlib.viewGetRandom ok");
}

pub struct IotaBalanceContext {
	results: MutableIotaBalanceResults,
	state: ImmutableTestWasmLibState,
}

fn view_iota_balance_thunk(ctx: &ScViewContext) {
	ctx.log("testwasmlib.viewIotaBalance");
	let f = IotaBalanceContext {
		results: MutableIotaBalanceResults {
			id: OBJ_ID_RESULTS,
		},
		state: ImmutableTestWasmLibState {
			id: OBJ_ID_STATE,
		},
	};
	view_iota_balance(ctx, &f);
	ctx.log("testwasmlib.viewIotaBalance ok");
}

pub struct MapValueContext {
	params: ImmutableMapValueParams,
	results: MutableMapValueResults,
	state: ImmutableTestWasmLibState,
}

fn view_map_value_thunk(ctx: &ScViewContext) {
	ctx.log("testwasmlib.viewMapValue");
	let f = MapValueContext {
		params: ImmutableMapValueParams {
			id: OBJ_ID_PARAMS,
		},
		results: MutableMapValueResults {
			id: OBJ_ID_RESULTS,
		},
		state: ImmutableTestWasmLibState {
			id: OBJ_ID_STATE,
		},
	};
	ctx.require(f.params.key().exists(), "missing mandatory key");
	ctx.require(f.params.name().exists(), "missing mandatory name");
	view_map_value(ctx, &f);
	ctx.log("testwasmlib.viewMapValue ok");
}
